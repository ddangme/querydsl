# ëª©ì°¨
ğŸ€ [JPQL vs QueryDSL](#jpql-vs-querydsl)  
ğŸ€ [Q-Type í™œìš©](#q-type-í™œìš©)  
ğŸ€ [ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬](#ê²€ìƒ‰-ì¡°ê±´-ì¿¼ë¦¬)  
ğŸ€ [ê²°ê³¼ ì¡°íšŒ](#ê²°ê³¼-ì¡°íšŒ)  
ğŸ€ [ì •ë ¬](#ì •ë ¬)  
ğŸ€ [í˜ì´ì§•](#í˜ì´ì§•)  
ğŸ€ [ì§‘í•©](#ì§‘í•©)  
ğŸ€ [ì¡°ì¸ - ê¸°ë³¸ ì¡°ì¸](#ì¡°ì¸---ê¸°ë³¸-ì¡°ì¸)  
ğŸ€ [ì¡°ì¸ - ON ì ˆ](#ì¡°ì¸---on-ì ˆ)  
ğŸ€ [ì¡°ì¸ - Fetch Join](#ì¡°ì¸---fetch-join)  
ğŸ€ [ì„œë¸Œ ì¿¼ë¦¬](#ì„œë¸Œ-ì¿¼ë¦¬)  
ğŸ€ [Case ë¬¸](#case-ë¬¸)  
ğŸ€ [ìƒìˆ˜, ë¬¸ì ë”í•˜ê¸°](#ìƒìˆ˜-ë¬¸ì-ë”í•˜ê¸°)

## JPQL vs QueryDSL
### [í…ŒìŠ¤íŠ¸ ê¸°ë³¸ ì½”ë“œ - QueryDSLBasicTest](..%2Fsrc%2Ftest%2Fjava%2Fstudy%2Fquerydsl%2FQueryDSLBasicTest.java)
```java
@ActiveProfiles("test")
@SpringBootTest
@Transactional
public class QueryDSLBasicTest {
    
    @PersistenceContext
    EntityManager em;
    
    @BeforeEach
    public void before() {
        Team teamA = new Team("teamA");
        Team teamB = new Team("teamB");
        em.persist(teamA);
        em.persist(teamB);

        Member member1 = new Member("member1", 10, teamA);
        Member member2 = new Member("member2", 10, teamA);
        Member member3 = new Member("member3", 10, teamA);
        Member member4 = new Member("member4", 10, teamA);
        
        em.persist(member1);
        em.persist(member2);
        em.persist(member3);
        em.persist(member4);
    }
}
```

### `JPQL`ê³¼ `QueryDSL` ì½”ë“œ ë¹„êµ
#### [JPQL - QueryDSLBasicTest](..%2Fsrc%2Ftest%2Fjava%2Fstudy%2Fquerydsl%2FQueryDSLBasicTest.java)
```java
@Test
void startJPQL() {
    // member1 ì°¾ê¸°
    String qlString = "SELECT m FROM Member m WHERE m.username = :username";

    Member findMember = em.createQuery(qlString, Member.class)
            .setParameter("username", "member1")
            .getSingleResult();

    assertThat(findMember.getUsername()).isEqualTo("member1");
}
```

#### [QueryDSL - QueryDSLBasicTest](..%2Fsrc%2Ftest%2Fjava%2Fstudy%2Fquerydsl%2FQueryDSLBasicTest.java) 
```java
@Test
void startQueryDSL() {
    // member1 ì°¾ê¸°
    JPAQueryFactory queryFactory = new JPAQueryFactory(em);
    QMember m = new QMember("m");

    Member findMember = queryFactory
            .select(m)
            .from(m)
            .where(m.username.eq("member1")) // íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì²˜ë¦¬
            .fetchOne();

    assertThat(findMember.getUsername()).isEqualTo("member1");
}
```
- `EntityManager`ë¡œ `JPAQueryFactory` ìƒì„±
- QueryDSLì€ JPQL ë¹Œë”
- 
|          | JPQL     | QueryDSL  |
|----------|----------|-----------|
| ì˜¤ë¥˜ ìœ í˜•    | ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜ | ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜ |
| íŒŒë¼ë¯¸í„° ë°”ì¸ë”© | ì§ì ‘ì ìœ¼ë¡œ ì²˜ë¦¬ | ìë™ìœ¼ë¡œ ì²˜ë¦¬   |

### JPAQueryFactoryë¥¼ í•„ë“œë¡œ
```java
@ActiveProfiles("test")
@SpringBootTest
@Transactional
public class QueryDSLBasicTest {

    @PersistenceContext
    EntityManager em;

    JPAQueryFactory queryFactory;

    @BeforeEach
    void before() {
        queryFactory = new JPAQueryFactory(em);
        
        // ... 
    }
    
    @Test
    void startQueryDSL2() {
        // member1 ì°¾ê¸°
        QMember m = new QMember("m");

        Member findMember = queryFactory
                .select(m)
                .from(m)
                .where(m.username.eq("member1"))
                .fetchOne();

        assertThat(findMember.getUsername()).isEqualTo("member1");
    }

}
```
JPAQueryFactoryë¥¼ í•„ë“œë¡œ ì œê³µí•˜ë©´ ë™ì‹œì„± ë¬¸ì œëŠ” ì–´ë–»ê²Œ ë ê¹Œ?  
ë™ì‹œì„± ë¬¸ì œëŠ” JPAQueryFactoryë¥¼ ìƒì„±í•  ë•Œ ì œê³µí•˜ëŠ” EntityManager(em)ì— ë‹¬ë ¤ìˆë‹¤.
ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì—¬ëŸ¬ ì“°ë ˆë“œì—ì„œ ë™ì‹œì— ê°™ì€ EntityManagerì— ì ‘ê·¼í•´ë„,
íŠ¸ëœì­ì…˜ ë§ˆë‹¤ ë³„ë„ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ë™ì‹œì„± ë¬¸ì œëŠ” ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

## Q-Type í™œìš©
## ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬
## ê²°ê³¼ ì¡°íšŒ
## ì •ë ¬
## í˜ì´ì§•
## ì§‘í•©
## ì¡°ì¸ - ê¸°ë³¸ ì¡°ì¸
## ì¡°ì¸ - ON ì ˆ
## ì¡°ì¸ - Fetch Join
## ì„œë¸Œ ì¿¼ë¦¬
## Case ë¬¸
## ìƒìˆ˜, ë¬¸ì ë”í•˜ê¸°